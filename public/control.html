<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>ğŸ« å”®ç¥¨æ§åˆ¶å°</title>
<link rel="stylesheet" href="style.css">
<script src="/socket.io/socket.io.js"></script>
</head>
<body>
<h1>ğŸ›ï¸ å”®ç¥¨æ§åˆ¶å°</h1>
<div id="zones"></div>

<script>
const socket = io();

// === å³æ™‚æ›´æ–°å€å¡Š ===
socket.on('update', data => {
  const container = document.getElementById('zones');
  container.innerHTML = '';

  for (let zone in data.total) {
    const sold = data.total[zone] - data.remaining[zone];
    const div = document.createElement('div');
    div.className = 'zone';
    div.innerHTML = `
      <h2>${zone} å€</h2>
      <p>ç¸½æ•¸ï¼š${data.total[zone]}</p>
      <p>å·²å”®å‡ºï¼š${sold}</p>
      <p>å‰©é¤˜ï¼š${data.remaining[zone]}</p>
      <button onclick="sell('${zone}')">å”®å‡ºä¸€å¼µ</button>
      <button onclick="refund('${zone}')">é€€å›ä¸€å¼µ</button>
    `;
    container.appendChild(div);
  }
});

// === å”®å‡ºä¸€å¼µ ===
function sell(zone) {
  const confirmed = confirm(`ç¢ºå®šè¦å”®å‡ºã€Œ${zone} å€ã€çš„ä¸€å¼µç¥¨å—ï¼Ÿ`);
  if (confirmed) socket.emit('sell', zone);
}

// === é€€å›ä¸€å¼µ ===
function refund(zone) {
  const confirmed = confirm(`ç¢ºå®šè¦é€€å›ã€Œ${zone} å€ã€çš„ä¸€å¼µç¥¨å—ï¼Ÿ`);
  if (confirmed) socket.emit('refund', zone);
}
</script>
</body>
</html>
